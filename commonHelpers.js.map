{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nlet baseUrl = 'https://pixabay.com/api/';\nlet searchQuery = null;\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  nav: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n  scrollZoom: false,\n  fadeSpeed: 400,\n});\n\nfunction showLoader() {\n  loader.style.display = 'block';\n  loader.style.visibility = 'visible';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n  loader.style.visibility = 'hidden';\n}\n\nfunction fetchImages() {\n  const searchParams = new URLSearchParams({\n    key: '41675513-91cb25c2d4155284de80d9ebe',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    q: searchQuery,\n  });\n  return fetch(`${baseUrl}?${searchParams.toString()}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  galleryContainer.innerHTML = '';\n  showLoader();\n  searchQuery = event.target.elements.search.value.trim();\n  fetchImages()\n    .then(images => {\n      if (images.hits && images.hits.length > 0) {\n        renderGallery(images.hits);\n      } else {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topCenter',\n        });\n        galleryContainer.innerHTML = '';\n      }\n    })\n    .catch(error => {\n      console.log('Error fetching images: ' + error);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n  event.currentTarget.reset();\n});\n\nfunction renderGallery(images) {\n  const mockupGallery = images.reduce(\n    (html, image) =>\n      html +\n      `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <div class=\"descr-container\">\n  <div class=\"image-descr\">Likes\n  <span class=\"image-descr-value\">${image.likes}</span>\n  </div>\n    <div class=\"image-descr\">Views\n  <span class=\"image-descr-value\">${image.views}</span>\n  </div>\n      <div class=\"image-descr\">Comments\n  <span class=\"image-descr-value\">${image.comments}</span>\n  </div>\n        <div class=\"image-descr\">Downloads\n  <span class=\"image-descr-value\">${image.downloads}</span>\n  </div>\n  </div>\n</li>`,\n    ''\n  );\n  galleryContainer.innerHTML = mockupGallery;\n  lightbox.refresh();\n}\n"],"names":["form","galleryContainer","loader","baseUrl","searchQuery","lightbox","SimpleLightbox","showLoader","hideLoader","fetchImages","searchParams","response","event","images","renderGallery","iziToast","error","mockupGallery","html","image"],"mappings":"6vBAMA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAE5CC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EAAU,2BACVC,EAAc,KAElB,MAAMC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,GACV,WAAY,GACZ,UAAW,GACb,CAAC,EAED,SAASC,GAAa,CACpBL,EAAO,MAAM,QAAU,QACvBA,EAAO,MAAM,WAAa,SAC5B,CACA,SAASM,GAAa,CACpBN,EAAO,MAAM,QAAU,OACvBA,EAAO,MAAM,WAAa,QAC5B,CAEA,SAASO,GAAc,CACrB,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,EAAGN,CACP,CAAG,EACD,OAAO,MAAM,GAAGD,KAAWO,EAAa,SAAQ,GAAI,EAAE,KAAKC,GAAY,CACrE,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CACAX,EAAK,iBAAiB,SAAUY,GAAS,CACvCA,EAAM,eAAc,EACpBX,EAAiB,UAAY,GAC7BM,IACAH,EAAcQ,EAAM,OAAO,SAAS,OAAO,MAAM,OACjDH,EAAa,EACV,KAAKI,GAAU,CACVA,EAAO,MAAQA,EAAO,KAAK,OAAS,EACtCC,EAAcD,EAAO,IAAI,GAEzBE,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,WACpB,CAAS,EACDd,EAAiB,UAAY,GAErC,CAAK,EACA,MAAMe,GAAS,CACd,QAAQ,IAAI,0BAA4BA,CAAK,CACnD,CAAK,EACA,QAAQ,IAAM,CACbR,GACN,CAAK,EACHI,EAAM,cAAc,OACtB,CAAC,EAED,SAASE,EAAcD,EAAQ,CAC7B,MAAMI,EAAgBJ,EAAO,OAC3B,CAACK,EAAMC,IACLD,EACA;AAAA,kCAC4BC,EAAM;AAAA;AAAA;AAAA,aAG3BA,EAAM;AAAA,aACNA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,oCAKiBA,EAAM;AAAA;AAAA;AAAA,oCAGNA,EAAM;AAAA;AAAA;AAAA,oCAGNA,EAAM;AAAA;AAAA;AAAA,oCAGNA,EAAM;AAAA;AAAA;AAAA,OAItC,EACJ,EACElB,EAAiB,UAAYgB,EAC7BZ,EAAS,QAAO,CAClB"}