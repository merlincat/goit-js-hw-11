{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  nav: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n  scrollZoom: false,\n  fadeSpeed: 400,\n});\n\nfunction showLoader() {\n  loader.style.display = 'block';\n  loader.style.visibility = 'visible';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n  loader.style.visibility = 'hidden';\n}\n\nconst searchParams = new URLSearchParams({\n  key: '41675513-91cb25c2d4155284de80d9ebe',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n});\nlet fetchUrl = `https://pixabay.com/api/?${searchParams.toString()}`;\n\nfunction fetchImages() {\n  return fetch(fetchUrl).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\nlet isSubmitHandled = false;\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  showLoader();\n  let searchQuery = event.target.elements.search.value.trim();\n  searchParams.set('q', searchQuery);\n  fetchUrl = `https://pixabay.com/api/?${searchParams.toString()}`;\n  fetchImages()\n    .then(images => {\n      if (images.hits && images.hits.length > 0) {\n        renderGallery(images.hits);\n      } else {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topCenter',\n        });\n        galleryContainer.innerHTML = '';\n      }\n    })\n    .catch(error => {\n      console.log('Error fetching images: ' + error);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n  form.reset();\n});\n\nfunction renderGallery(images) {\n  const mockupGallery = images.reduce(\n    (html, image) =>\n      html +\n      `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <div class=\"descr-container\">\n  <div class=\"image-descr\">Likes\n  <span class=\"image-descr-value\">${image.likes}</span>\n  </div>\n    <div class=\"image-descr\">Views\n  <span class=\"image-descr-value\">${image.views}</span>\n  </div>\n      <div class=\"image-descr\">Comments\n  <span class=\"image-descr-value\">${image.comments}</span>\n  </div>\n        <div class=\"image-descr\">Downloads\n  <span class=\"image-descr-value\">${image.downloads}</span>\n  </div>\n  </div>\n</li>`,\n    ''\n  );\n  galleryContainer.innerHTML = mockupGallery;\n  lightbox.open(images);\n  lightbox.refresh();\n}\n"],"names":["form","galleryContainer","loader","lightbox","SimpleLightbox","showLoader","hideLoader","searchParams","fetchUrl","fetchImages","response","event","searchQuery","images","renderGallery","iziToast","error","mockupGallery","html","image"],"mappings":"6vBAMA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAE5CC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,GACV,WAAY,GACZ,UAAW,GACb,CAAC,EAED,SAASC,GAAa,CACpBH,EAAO,MAAM,QAAU,QACvBA,EAAO,MAAM,WAAa,SAC5B,CACA,SAASI,GAAa,CACpBJ,EAAO,MAAM,QAAU,OACvBA,EAAO,MAAM,WAAa,QAC5B,CAEA,MAAMK,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,MACd,CAAC,EACD,IAAIC,EAAW,4BAA4BD,EAAa,SAAQ,IAEhE,SAASE,GAAc,CACrB,OAAO,MAAMD,CAAQ,EAAE,KAAKE,GAAY,CACtC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEAV,EAAK,iBAAiB,SAAUW,GAAS,CACvCA,EAAM,eAAc,EACpBN,IACA,IAAIO,EAAcD,EAAM,OAAO,SAAS,OAAO,MAAM,OACrDJ,EAAa,IAAI,IAAKK,CAAW,EACjCJ,EAAW,4BAA4BD,EAAa,SAAQ,IAC5DE,EAAa,EACV,KAAKI,GAAU,CACVA,EAAO,MAAQA,EAAO,KAAK,OAAS,EACtCC,EAAcD,EAAO,IAAI,GAEzBE,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,WACpB,CAAS,EACDd,EAAiB,UAAY,GAErC,CAAK,EACA,MAAMe,GAAS,CACd,QAAQ,IAAI,0BAA4BA,CAAK,CACnD,CAAK,EACA,QAAQ,IAAM,CACbV,GACN,CAAK,EACHN,EAAK,MAAK,CACZ,CAAC,EAED,SAASc,EAAcD,EAAQ,CAC7B,MAAMI,EAAgBJ,EAAO,OAC3B,CAACK,EAAMC,IACLD,EACA;AAAA,kCAC4BC,EAAM;AAAA;AAAA;AAAA,aAG3BA,EAAM;AAAA,aACNA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,oCAKiBA,EAAM;AAAA;AAAA;AAAA,oCAGNA,EAAM;AAAA;AAAA;AAAA,oCAGNA,EAAM;AAAA;AAAA;AAAA,oCAGNA,EAAM;AAAA;AAAA;AAAA,OAItC,EACJ,EACElB,EAAiB,UAAYgB,EAC7Bd,EAAS,KAAKU,CAAM,EACpBV,EAAS,QAAO,CAClB"}